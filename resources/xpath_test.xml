<scxml xmlns="http://www.w3.org/2005/07/scxml" datamodel="xpath" xmlns:fn="http://www.w3.org/2005/xpath-functions">

    <datamodel>
        <data id="myVar" expr="123" />
        <data id="myVar2">
            <sub xmlns="">456</sub>
        </data>
        <data id="cart">
            <myCart xmlns="">
                <books>
                    <book>
                        <title>The Zen Mind</title>
                    </book>
                    <book>
                        <title>Freakonomics</title>
                    </book>
                </books>
                <cds>
                    <cd name="Something" />
                </cds>
            </myCart>
        </data>
    </datamodel>
    
    <state id="s1">
        <onentry>
        
            <send event="e">
              <param name="myVar" expr="$myVar/text()" />
              <param name="myVar2" expr="$myVar2/sub" />
            </send>
        </onentry>
        
        <transition event="e" target="f">
            <log label="caught e"  />
            <log expr="$_event/data/myVar = 123" />
            <log expr="$_event/data/myVar2/sub = 456" />
        </transition>
    </state>
    
    <final id="f">
        <onentry>
<!--             <log label="final" expr="$val" /> -->
        </onentry>
    </final>
</scxml>