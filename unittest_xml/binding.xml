<scxml binding="early">
    <datamodel>
        <data id="d1" expr="1" />
    </datamodel>
    <parallel id="p">
        <state id="s1">
            <state>
            <invoke id="i">
                <content><![CDATA[
                   <scxml binding="late">
                        <datamodel>
                            <data id="d1" expr="1" />
                        </datamodel>
                        <state id="s2">
                            <datamodel>
                                <data id="d1" expr="2" />
                            </datamodel>
                            <transition target="i_f" cond="d1 == 1" />
                        </state>
                        <final id="i_f" />
                    </scxml> 
                ]]></content>
            </invoke>
            <transition event="done.invoke" target="f1" />
            </state>
            <final id="f1" />
        </state>
        <state id="s2">
            <datamodel>
                <data id="d1" expr="2" />
            </datamodel>
            <state>
                <transition target="f2" cond="d1 == 2" />
            </state>
            <final id="f2" />
        </state>
        <transition event="done.state.p" target="f" />
    </parallel>
    <final id="f" />
</scxml>